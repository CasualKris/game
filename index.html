<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game</title>
<link rel="stylesheet" href="src/css/style.css">
<script src="src/js/main.js"></script>
</head>
<body>
<canvas id="gameCanvas" width="400" height="400"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const segmentSize = 20;
    let snakeSegments = [{ x: 20, y: 20 }];
    let direction = 'right';
    let food = { x: 200, y: 200 };
    let speed = 150; 
    let speedIncrement = 5; 
    let lastTime = 0;

    function update(currentTime) {
        const deltaTime = currentTime - lastTime;
        if (deltaTime > speed) {
            lastTime = currentTime;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Teken het voedsel
            ctx.fillStyle = 'red';
            ctx.fillRect(food.x, food.y, segmentSize, segmentSize);

            // Teken de slang
            ctx.fillStyle = 'green';
            snakeSegments.forEach(segment => {
                ctx.fillRect(segment.x, segment.y, segmentSize, segmentSize);
            });

            // Beweeg de slang
            moveSnake();

            // Controleer of de slang het voedsel heeft bereikt
            if (snakeSegments[0].x === food.x && snakeSegments[0].y === food.y) {
                // Voeg een segment toe aan de slang
                snakeSegments.push({});
                generateFood();
                // Verhoog de snelheid
                speed -= speedIncrement;
            }

            // Controleer op botsingen met de randen van het canvas
            if (snakeSegments[0].x < 0 || snakeSegments[0].x >= canvas.width || snakeSegments[0].y < 0 || snakeSegments[0].y >= canvas.height) {
                gameOver();
                return;
            }

            // Controleer op botsingen met de slang zelf
            for (let i = 1; i < snakeSegments.length; i++) {
                if (snakeSegments[0].x === snakeSegments[i].x && snakeSegments[0].y === snakeSegments[i].y) {
                    gameOver();
                    return;
                }
            }
        }

        requestAnimationFrame(update);
    }

    function moveSnake() {
        const head = { x: snakeSegments[0].x, y: snakeSegments[0].y };

        // Beweeg de kop in de juiste richting
        if (direction === 'up') head.y -= segmentSize;
        if (direction === 'down') head.y += segmentSize;
        if (direction === 'left') head.x -= segmentSize;
        if (direction === 'right') head.x += segmentSize;

        // Voeg de nieuwe kop toe aan het begin van de slang
        snakeSegments.unshift(head);

        // Verwijder het laatste segment van de slang
        snakeSegments.pop();
    }

    function generateFood() {
        // Genereer willekeurige coÃ¶rdinaten voor het voedsel
        food.x = Math.floor(Math.random() * (canvas.width / segmentSize)) * segmentSize;
        food.y = Math.floor(Math.random() * (canvas.height / segmentSize)) * segmentSize;
    }

    function gameOver() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.font = "30px Arial";
        ctx.fillStyle = 'red';
        ctx.textAlign = 'center';
        ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2);
    }

    document.addEventListener('keydown', function(event) {
        const key = event.key;

        // Verander de richting van de slang afhankelijk van de toetsaanslag
        if ((key === 'ArrowUp' || key === 'w') && direction !== 'down') direction = 'up';
        if ((key === 'ArrowDown' || key === 's') && direction !== 'up') direction = 'down';
        if ((key === 'ArrowLeft' || key === 'a') && direction !== 'right') direction = 'left';
        if ((key === 'ArrowRight' || key === 'd') && direction !== 'left') direction = 'right';
    });

    // Start de gameloop
    requestAnimationFrame(update);
</script>
</body>
</html>
